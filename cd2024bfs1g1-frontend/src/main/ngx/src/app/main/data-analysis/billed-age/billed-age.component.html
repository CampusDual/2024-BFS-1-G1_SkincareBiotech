<mat-tab-group>
    <mat-tab>
        <ng-template class="label" mat-tab-label>{{ "AGE_RANGE" | oTranslate }}</ng-template>
        <h1>{{"BILLING_BY_AGE_TITTLE" | oTranslate}}</h1>
        <ng-container *ngIf="isGraph; else noChart">
            <div class="chart-container">
                <o-chart type="discreteBar" service="billed-ages" entity="billedAgeChart" x-axis="AGE_RANGE"
                    y-axis="TOTAL" x-label="Age" y-label="Amount (€)" [color]="colorScheme" >
                </o-chart>
                <o-table service="billed-ages" entity="billedAgeChart" keys="AGE_RANGE" oHidden="yes"
                    columns="AGE_RANGE;TOTAL;GBA_MIN_AGE;GBA_MAX_AGE"
                    visible-columns="AGE_RANGE;TOTAL;GBA_MIN_AGE;GBA_MAX_AGE" query-rows="30" delete-button='no'
                    (onDataLoaded)="loadBilledAge($event)"></o-table>
                    <div  *ngIf="languageService.isEn$ | async; then enBlock else esBlock"></div>       
                    <ng-template #enBlock>The customers aged between {{ minAge }} and {{ maxAge }} years old
                        are the highest revenue generators, accounting for {{percentage | number: '1.2-2' }}% of the total revenue
                    </ng-template>
                    <ng-template #esBlock>Los clientes con el rango de edad comprendido entre {{ minAge }} y {{ maxAge }} años
                        es el que más factura con un {{percentage | number: '1.2-2' }}% sobre el total de facturado
                    </ng-template>
                  </div>
        </ng-container>
        <ng-template #noChart>{{'NO_DATA_FOR_SELECTED_AGE_RANGE' | oTranslate }}</ng-template>
    </mat-tab>

    <mat-tab>
        <ng-template class="label" mat-tab-label>{{ "AGE_GENDER" | oTranslate }}</ng-template>
        <h1>{{"BILLING_BY_AGE_AND_GENDER_TITTLE" | oTranslate}}</h1>
        <ng-container *ngIf="isGraph; else noChart">
            <div class="chart-container">
                <o-chart type="multiBar" service="billed-ages" entity="billedAgeGenderChart" x-axis="GBA_MIN_AGE"
                    y-axis="MAN;WOMAN;OTHER;PNA" x-label="Age" y-label="Amount (€)" [chart-parameters]="chartParameters"
                    [color]="colorScheme">
                </o-chart>
                <o-table service="billed-ages" entity="billedAgeGenderChart" keys="AGE_RANGE" oHidden="yes"
                    columns="AGE_RANGE;MAN;WOMAN;OTHER;PNA;GBA_MIN_AGE;GBA_MAX_AGE"
                    visible-columns="AGE_RANGE;MAN;WOMAN;OTHER;PNA;GBA_MIN_AGE;GBA_MAX_AGE" query-rows="15"
                    delete-button='no' (onDataLoaded)="loadAgeGender($event)"></o-table>
            </div>
            <div  *ngIf="languageService.isEn$ | async; then enBlock else esBlock"></div>       
            <ng-template #enBlock>The customers with gender {{maxBilledGenre}} and age range between {{ minAge2 }} and {{ maxAge2 }} 
                years old generate the highest revenue, accounting for {{percentage2 | number: '1.2-2' }}% of the total revenue.
            </ng-template>
            <ng-template #esBlock>Los clientes con género {{maxBilledGenre}} y rango de edad comprendido entre {{ minAge2 }} y {{
                maxAge2 }} años es el que más factura con un {{percentage2 | number: '1.2-2' }}% sobre el total de
                facturado
            </ng-template>

        </ng-container>
        <ng-template #noChart>{{'NO_DATA_FOR_SELECTED_AGE_RANGE' | oTranslate }}</ng-template>
    </mat-tab>
    <mat-tab>
        <ng-template class="label" mat-tab-label>{{ "SETTINGS" | oTranslate }}</ng-template>
        <o-table attr="billedAgeTable" service="billed-ages" entity="billedAge" keys="GBA_ID"
            columns="GBA_ID;GBA_MIN_AGE;GBA_MAX_AGE" visible-columns="GBA_MIN_AGE;GBA_MAX_AGE" query-rows="20"
            delete-button='true' header-actions="R;D" quick-filter="false" edition-mode="none" detail-mode="none"
            auto-adjust="false">
            <o-table-column attr="GBA_MIN_AGE" title="GBA_MIN_AGE" width="300px"></o-table-column>
            <o-table-column attr="GBA_MAX_AGE" title="GBA_MAX_AGE" width="300px"></o-table-column>
        </o-table>
    </mat-tab>
</mat-tab-group>